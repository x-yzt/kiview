(function(e){function t(t){for(var n,a,l=t[0],i=t[1],s=t[2],u=0,b=[];u<l.length;u++)a=l[u],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&b.push(c[a][0]),c[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,l=1;l<r.length;l++){var i=r[l];0!==c[i]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},c={app:0},o=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/kiview/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=i;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},3741:function(e,t,r){"use strict";r("d888")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),c=(r("b972"),r("d3b7"),r("ddb0"),Object(n["createVNode"])("p",{class:"my-4"},"Select a ligand to fetch its Ki data.",-1)),o={class:"max-w-sm my-4"},a=Object(n["createVNode"])("label",{class:"text-sm text-gray-600"},"Type to filter ligands.",-1),l={class:"my-4 text-2xl font-bold"},i={class:"max-w-xl my-4 overflow-hidden rounded-xl shadow-md\n    bg-gray-100"},s=Object(n["createVNode"])("h4",{class:"p-3 text-xl border-b-4\n      bg-indigo-600 border-gray-300 text-white"}," Filters ",-1),d={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 p-3 items-center"},u=Object(n["createVNode"])("div",null,[Object(n["createVNode"])("p",{class:"font-semibold"},"Restrict values to experiments concerning:")],-1),b=Object(n["createVNode"])("div",null,[Object(n["createVNode"])("p",{class:"font-semibold"},"Reject outlying values:")],-1),p=Object(n["createVNode"])("label",{for:"outliers"},"Exclude outliers exceeding",-1),O=Object(n["createVNode"])("label",{for:"deviation"},"standard deviations",-1),j=Object(n["createVNode"])("div",null,[Object(n["createVNode"])("label",{for:"deviation",class:"text-sm text-gray-600"}," If you're unsure, keep it in the range 1-3. ")],-1),m={key:0,class:"my-3 p-3 max-w-xl rounded-xl font-semibold shadow-md\n      bg-red-500 text-white"},f=Object(n["createVNode"])("p",{class:"my-4 text-center"},"All data is from the PDSP Ki database.",-1),g=Object(n["createVNode"])("p",{class:"my-4 text-center"},[Object(n["createTextVNode"])(" This app and its underlying API are volunteer works. If you like them, please "),Object(n["createVNode"])("a",{class:"underline text-indigo-700",href:"https://liberapay.com/xyzt_/donate"},"consider supporting them"),Object(n["createTextVNode"])("! ")],-1);function h(e,t,r,h,v,y){var V=Object(n["resolveComponent"])("SearchableSelect"),N=Object(n["resolveComponent"])("RadioButtons"),x=Object(n["resolveComponent"])("ValueList"),k=Object(n["resolveComponent"])("SourceList");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[c,Object(n["createVNode"])("form",o,[Object(n["createVNode"])(V,{options:v.ligands,modelValue:v.ligand,"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.ligand=e})},null,8,["options","modelValue"]),a]),Object(n["createVNode"])("h3",l,"Ligand: "+Object(n["toDisplayString"])(v.ligand),1),Object(n["createVNode"])("div",i,[s,Object(n["createVNode"])("form",d,[u,Object(n["createVNode"])("div",null,[Object(n["createVNode"])(N,{name:"species",options:v.SPECIES,modelValue:v.filters.species,"onUpdate:modelValue":t[2]||(t[2]=function(e){return v.filters.species=e})},null,8,["options","modelValue"])]),b,Object(n["createVNode"])("div",null,[Object(n["createVNode"])("div",null,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{id:"outliers",class:"mr-1",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=function(e){return v.filters.outliers=e})},null,512),[[n["vModelCheckbox"],v.filters.outliers]]),p]),Object(n["createVNode"])("div",null,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{id:"deviation",class:"rounded px-1 py-0.5 mr-1 w-16 align-middle border\n              border-gray-300 text-gray-700",type:"number",min:"0",step:"0.01",disabled:!v.filters.outliers,"onUpdate:modelValue":t[4]||(t[4]=function(e){return v.filters.deviation=e})},null,8,["disabled"]),[[n["vModelText"],v.filters.deviation]]),O]),j])])]),v.warning?(Object(n["openBlock"])(),Object(n["createBlock"])("div",m," Something wrong occured: "+Object(n["toDisplayString"])(v.warning),1)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(x,{values:v.values},null,8,["values"]),Object(n["createVNode"])(k,{sources:v.sources},null,8,["sources"]),f,g],64)}var v=r("1da1"),y=(r("4e82"),r("96cf"),r("bc3a")),V=r.n(y);r("ac1f"),r("841c");function N(e,t,r,c,o,a){var l=Object(n["resolveComponent"])("v-select");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{options:a.displayedOptions,filterable:!1,onSearch:t[1]||(t[1]=function(e){return o.search=e}),modelValue:o.modelValue,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.modelValue=e})},{"list-footer":Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("li",null," Plus "+Object(n["toDisplayString"])(a.truncated)+" hidden items... ",513),[[n["vShow"],a.truncated]])]})),_:1},8,["options","modelValue"])}r("5319"),r("2ca0"),r("8a79"),r("a9e3"),r("fb6a"),r("4de4"),r("caad"),r("2532");var x=r("b973"),k=r.n(x);r("b532");function w(e){return e.toLowerCase().replace(/[^\w]/g,"")}function S(e,t,r){return e=w(e),t=w(t),r=w(r),2*e.startsWith(r)+e.endsWith(r)<2*t.startsWith(r)+t.endsWith(r)}var B={components:{vSelect:k.a},data:function(){return{modelValue:null,search:""}},props:{options:{type:Array},maxOptions:{type:Number,default:200}},computed:{displayedOptions:function(){var e=this;return this.options.filter((function(t){return w(t).includes(w(e.search))})).slice(0,this.maxOptions).sort((function(t,r){return S(t,r,e.search)}))},truncated:function(){return this.options.length-this.displayedOptions.length}}};B.render=N;var D=B;r("99af"),r("b0c0");function C(e,t,r,c,o,a){return Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(r.options,(function(e,c){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:c},[Object(n["withDirectives"])(Object(n["createVNode"])("input",{id:"".concat(r.name,"-").concat(c),class:"mr-1",type:"radio",name:r.name,value:c,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.value=e})},null,8,["id","name","value"]),[[n["vModelRadio"],a.value]]),Object(n["createVNode"])("label",{for:"".concat(r.name,"-").concat(c)},Object(n["toDisplayString"])(e),9,["for"])])})),128)}var R={props:{modelValue:String,options:Object,name:{type:String,default:""}},emits:["update:modelValue"],computed:{value:{get:function(){return this.modelValue},set:function(e){this.$emit("update:modelValue",e)}}}};R.render=C;var L=R,M=(r("25f0"),Object(n["createVNode"])("h4",{class:"my-4 text-xl font-semibold"},"Receptor affinities",-1)),P={key:0},U={class:"flex flex-wrap gap-3 items-center"},T={class:"text-2xl text-indigo-700"},_={class:"leading-3"},A={class:"text-xl"},I=Object(n["createTextVNode"])(" Ki: "),E={class:"font-semibold text-indigo-700"},F=Object(n["createTextVNode"])(" nM "),H=Object(n["createVNode"])("small",{class:"text-sm text-gray-600"},"(median)",-1),K={class:"text-sm text-gray-600"},W=Object(n["createVNode"])("br",null,null,-1),q=Object(n["createVNode"])("br",null,null,-1);function J(e,t,r,c,o,a){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[M,e.isEmpty(r.values)?(Object(n["openBlock"])(),Object(n["createBlock"])("p",P,"No data matched your query.")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("ul",U,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(r.values,(function(t,r){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:r,class:"inline-flex flex-wrap justify-between items-center gap-3 p-3 rounded border-l-4 shadow-md\n        bg-gray-100 border-indigo-600"},[Object(n["createVNode"])("h5",T,Object(n["toDisplayString"])(e.capFirst(r)),1),Object(n["createVNode"])("div",_,[Object(n["createVNode"])("div",A,[I,Object(n["createVNode"])("span",E,Object(n["toDisplayString"])(e.round(t.median)),1),F]),H]),Object(n["createVNode"])("small",K,[Object(n["createTextVNode"])(" Mean: "+Object(n["toDisplayString"])(e.round(t.mean))+" nM ",1),W,Object(n["createTextVNode"])(" Std. deviation: "+Object(n["toDisplayString"])(e.round(t.std))+" "+Object(n["toDisplayString"])("NaN"!==t.std.toString()?"nM":"")+" ",1),q,Object(n["createTextVNode"])(" Retained values: "+Object(n["toDisplayString"])(t.count),1)])])})),128))])],64)}var z={props:["values"]};z.render=J;var G=z,$=(r("9911"),Object(n["withScopeId"])("data-v-80c9e464"));Object(n["pushScopeId"])("data-v-80c9e464");var Q=Object(n["createVNode"])("h4",{class:"my-4 text-xl font-semibold"},"Retained values sources",-1),X={class:"my-4 overflow-x-auto rounded shadow-md"},Y={class:"w-full bg-gray-100"},Z=Object(n["createVNode"])("tr",{class:"border-b-4 border-indigo-600"},[Object(n["createVNode"])("th",null,"Receptor"),Object(n["createVNode"])("th",null,"Species"),Object(n["createVNode"])("th",null,"Result"),Object(n["createVNode"])("th",null,"Reference ligand"),Object(n["createVNode"])("th",null,"Publication")],-1),ee={key:0},te=Object(n["createVNode"])("td",{colspan:"99"},"No source matched your query.",-1),re={key:0,class:"block text-sm text-gray-600"},ne={key:0,class:"block text-sm text-gray-600"},ce={class:"whitespace-nowrap"},oe={key:1};Object(n["popScopeId"])();var ae=$((function(e,t,r,c,o,a){return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Q,Object(n["createVNode"])("div",X,[Object(n["createVNode"])("table",Y,[Z,e.isEmpty(r.sources)?(Object(n["openBlock"])(),Object(n["createBlock"])("tr",ee,[te])):Object(n["createCommentVNode"])("",!0),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(r.sources,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:t},[Object(n["createVNode"])("td",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.receptor)+" ",1),t.unigene?(Object(n["openBlock"])(),Object(n["createBlock"])("small",re," UniGene: "+Object(n["toDisplayString"])(t.unigene),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("td",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.species)+" ",1),t.source?(Object(n["openBlock"])(),Object(n["createBlock"])("small",ne," Source: "+Object(n["toDisplayString"])(t.source),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("td",ce," Ki "+Object(n["toDisplayString"])(t.ki_op)+" "+Object(n["toDisplayString"])(e.round(t.ki))+" nM ",1),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.ref_ligand),1),Object(n["createVNode"])("td",null,[t.link?(Object(n["openBlock"])(),Object(n["createBlock"])("a",{key:0,class:"underline text-indigo-700",href:t.link},Object(n["toDisplayString"])(t.reference),9,["href"])):(Object(n["openBlock"])(),Object(n["createBlock"])("span",oe,Object(n["toDisplayString"])(t.reference),1))])])})),128))])])],64)})),le={props:["sources"]};r("3741");le.render=ae,le.__scopeId="data-v-80c9e464";var ie=le,se={components:{SearchableSelect:D,RadioButtons:L,ValueList:G,SourceList:ie},methods:{fetchData:function(e){var t=arguments,r=this;return Object(v["a"])(regeneratorRuntime.mark((function n(){var c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=t.length>1&&void 0!==t[1]?t[1]:{},o=r.API_URL+e,r.warning=null,n.prev=3,n.next=6,V.a.get(o,{params:c});case 6:return n.abrupt("return",n.sent);case 9:n.prev=9,n.t0=n["catch"](3),r.warning=n.t0.message,console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,9]])})))()},fetchValues:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="ki/".concat(encodeURIComponent(e.ligand)),t.next=3,e.fetchData(r,e.params);case 3:n=t.sent,e.values=n.data.ki,e.sources=n.data.sources,console.log(n);case 7:case"end":return t.stop()}}),t)})))()},fetchLigands:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData("ligands",{"max-len":30});case 2:r=t.sent,e.ligands=r.data.sort();case 4:case"end":return t.stop()}}),t)})))()}},watch:{ligand:"fetchValues",params:{handler:"fetchValues",deep:!0}},computed:{params:function(){var e={};switch(this.filters.outliers&&this.filters.deviation&&(e.deviation=this.filters.deviation),this.filters.species){case"HUMAN":e.species="HUMAN";break;case"CLONED":e.species="HUMAN",e.source="CLONED"}return e}},data:function(){return{API_URL:"https://kidb.mixtures.info/v1/",SPECIES:{ALL:"All species",HUMAN:"Human only",CLONED:"Human, cloned receptors only"},ligand:"LSD",filters:{species:"HUMAN",outliers:!0,deviation:1},values:null,sources:null,ligands:[],warning:null}},mounted:function(){this.fetchLigands(),this.fetchValues()}};se.render=h;var de=se,ue=(r("4fad"),{methods:{isEmpty:function(e){return!e||0===e.length||0===Object.entries(e).length},capFirst:function(e){return e[0].toUpperCase()+e.slice(1)},round:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=Math.pow(10,t);return Math.round(e*r)/r}}}),be=Object(n["createApp"])(de);be.mixin(ue),be.mount("#app")},d888:function(e,t,r){}});
//# sourceMappingURL=app.8572c9ac.js.map